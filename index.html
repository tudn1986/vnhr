<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>VNHR — Công Cụ Tính Lương (Modular)</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 20px; max-width: 1100px; margin: auto; }
    h1 { margin-bottom: 6px; }
    h2 { margin-top: 22px; }
    .grid { display: grid; grid-template-columns: 1fr 420px; gap: 20px; align-items: start; }
    .card { border: 1px solid #ddd; padding: 14px; border-radius: 6px; background: #fff; }
    .input-row { display:flex; gap:10px; margin-bottom:8px; align-items:center; }
    .input-row label { width: 320px; font-size: 14px; }
    input[type=number], input[type=text], input[type=month] { flex:1; padding:6px 8px; }
    button { padding: 8px 12px; margin-top: 8px; cursor: pointer; }
    .result-box { margin-top: 12px; padding: 10px; border-radius:6px; background:#f7f7f8; }
    details { margin-top:8px; }
    .small { font-size: 13px; color:#555; }
  </style>
</head>
<body>
  <h1>VNHR — Công Cụ Tính Lương (Module)</h1>
  <p class="small">Nhập đầy đủ các mức lương và số giờ/ngày để có kết quả phân tích. Kết quả cập nhật tự động khi thay đổi input.</p>

  <div class="grid">
    <div>
      <div class="card">
        <h2>A. Mức lương thỏa thuận theo HĐLĐ</h2>
        <div class="input-row"><label for="payMonth">Tháng tính lương:</label><input id="payMonth" type="month"></div>
        <div class="input-row"><label for="baseSalary">Mức lương cơ bản (VND/Tháng):</label><input id="baseSalary" type="number" value="10000000" min="0"></div>
        <div class="input-row"><label for="allowanceSalary">Mức lương tính phụ cấp (VND/Tháng):</label><input id="allowanceSalary" type="number" value="10000000" min="0"></div>
        <div class="input-row"><label for="monthlyAllowance">Mức phụ cấp (VND/Tháng):</label><input id="monthlyAllowance" type="number" value="0" min="0"></div>
        <div class="input-row"><label for="attendanceAllowanceBase">Mức phụ cấp chuyên cần (VND/Tháng):</label><input id="attendanceAllowanceBase" type="number" value="0" min="0"></div>
        <div class="input-row"><label for="planLeaveSalary">Mức lương nghỉ theo kế hoạch công ty (VND/Tháng):</label><input id="planLeaveSalary" type="number" value="10000000" min="0"></div>
        <div class="input-row"><label for="socialSalary">Mức lương tham gia BHXH (VND/Tháng):</label><input id="socialSalary" type="number" value="10000000" min="0"></div>

        <!-- Display monthly allowance amount right under salary inputs -->
        <div style="margin-top:8px; margin-bottom:10px;">
          <strong>Số tiền phụ cấp hàng th��ng:</strong> <span id="monthlyAllowanceAmount">-</span>
        </div>

        <h2>B. Căn cứ tính lương</h2>
        <div class="input-row"><label for="workingDaysInMonth">1. Số ngày làm việc trong tháng (ngày):</label><input id="workingDaysInMonth" type="number" value="22" min="0"></div>

        <h3>Số giờ làm việc thực tế</h3>
        <!-- a. Ca ngày thường ban ngày -->
        <fieldset>
          <legend class="small"><strong>a) Ca ngày thường (ban ngày)</strong></legend>
          <div class="input-row"><label for="day_norm_08_17">Giờ tổng trong khoảng 08:00-17:00 (bao gồm nghỉ trưa):</label><input id="day_norm_08_17" type="number" value="198" min="0"></div>
          <div class="input-row"><label for="day_ot_17_20">Tăng ca (17:00-20:00):</label><input id="day_ot_17_20" type="number" value="0" min="0"></div>
          <div class="input-row"><label for="day_ot_20_24">Tăng ca đêm (20:00-24:00):</label><input id="day_ot_20_24" type="number" value="0" min="0"></div>
        </fieldset>

        <!-- b. Ca ban đêm -->
        <fieldset>
          <legend class="small"><strong>b) Ca ban đêm</strong></legend>
          <div class="input-row"><label for="night_norm_20_22">Giờ trong khoảng 20:00-22:00:</label><input id="night_norm_20_22" type="number" value="0" min="0"></div>
          <div class="input-row"><label for="night_22_24">Giờ trong khoảng 22:00-24:00:</label><input id="night_22_24" type="number" value="0" min="0"></div>
          <div class="input-row"><label for="night_00_04">Giờ trong khoảng 00:00-04:00:</label><input id="night_00_04" type="number" value="0" min="0"></div>
          <div class="input-row"><label for="night_04_05">Giờ trong khoảng 04:00-05:00:</label><input id="night_04_05" type="number" value="0" min="0"></div>
          <div class="input-row"><label for="night_05_06">Giờ tăng ca (05:00-06:00):</label><input id="night_05_06" type="number" value="0" min="0"></div>
          <div class="input-row"><label for="night_06_08">Giờ tăng ca (06:00-08:00):</label><input id="night_06_08" type="number" value="0" min="0"></div>
        </fieldset>

        <!-- c, d -->
        <div class="input-row"><label for="sunday_day_hours">c) Giờ làm chủ nhật (08:00-22:00):</label><input id="sunday_day_hours" type="number" value="0" min="0"></div>
        <div class="input-row"><label for="sunday_night_hours">d) Giờ làm chủ nhật (20:00-08:00):</label><input id="sunday_night_hours" type="number" value="0" min="0"></div>

        <!-- e, f, g, h -->
        <div class="input-row"><label for="holidayDays">e) Số ngày nghỉ lễ, tết (có hưởng lương):</label><input id="holidayDays" type="number" value="0" min="0"></div>
        <div class="input-row"><label for="paidLeaveDays">f) Số ngày nghỉ phép (có hưởng lương):</label><input id="paidLeaveDays" type="number" value="0" min="0"></div>
        <div class="input-row"><label for="companyPlanLeaveDays">g) Số ngày nghỉ kế hoạch công ty:</label><input id="companyPlanLeaveDays" type="number" value="0" min="0"></div>
        <div class="input-row"><label for="extraOvertimeHours">h) Tổng số giờ tăng ca (tổng báo cáo):</label><input id="extraOvertimeHours" type="number" value="0" min="0"></div>

        <div class="input-row"><label for="numDependents">Số người phụ thuộc (để giảm trừ):</label><input id="numDependents" type="number" value="0" min="0"></div>

        <div style="margin-top:8px;">
          <button id="recalcBtn">Tính lại</button>
          <button id="resetBtn" type="button">Reset</button>
        </div>
      </div>
    </div>

    <div>
      <div class="card">
        <h2>Kết quả & phân tích</h2>
        <div class="result-box">
          <p><strong>Tháng tính lương:</strong> <span id="displayPayMonth">-</span></p>
          <p><strong>Tổng tiền lương từ giờ làm (gross):</strong> <span id="totalHourSalary">-</span></p>
          <p><strong>Tổng thu nhập (gồm phụ cấp):</strong> <span id="totalIncome">-</span></p>
          <p><strong>Phụ cấp hàng tháng (đầu vào):</strong> <span id="monthlyAllowanceAmountResult">-</span></p>
          <p><strong>Khấu trừ BHXH (NV đóng):</strong> <span id="insuranceDeduction">-</span></p>
          <p><strong>Thu nhập miễn thuế (tăng ca miễn thuế):</strong> <span id="taxFreeOvertime">-</span></p>
          <p><strong>Thu nhập chịu thuế:</strong> <span id="taxableIncome">-</span></p>
          <p><strong>Thu nhập tính thuế (sau khấu trừ):</strong> <span id="taxableBase">-</span></p>
          <p><strong>Thuế TNCN cần nộp:</strong> <span id="personalIncomeTax">-</span></p>
          <p><strong>Lương thực nhận:</strong> <span id="netSalary">-</span></p>

          <details>
            <summary>Chi tiết phân tích</summary>
            <ul id="breakdownList" class="small"></ul>
          </details>
          <p class="small">Ghi chú: Các hệ số, mức giảm trừ và biểu thuế có thể cấu hình trong src/constants.js</p>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="src/main.js"></script>
</body>
</html>
